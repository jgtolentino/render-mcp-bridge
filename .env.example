# ========================================
# OAuth2/OIDC Authentication Configuration
# ========================================

# Auth Provider Domain (e.g., your-tenant.auth0.com or Supabase project URL)
AUTH_DOMAIN=your-tenant.auth0.com

# API Audience (identifier for your API resource)
AUTH_AUDIENCE=mcp-api

# Token Issuer (full URL including https://)
AUTH_ISSUER=https://your-tenant.auth0.com/

# JWKS URI (JSON Web Key Set endpoint for public key retrieval)
JWKS_URI=https://your-tenant.auth0.com/.well-known/jwks.json

# ========================================
# Migration & Backward Compatibility
# ========================================

# Enable Basic Auth fallback during migration period
# Set to "true" to accept both Bearer tokens AND Basic Auth
# Set to "false" once all clients migrated to OAuth2
ENABLE_BASIC_AUTH_FALLBACK=false

# Basic Auth credentials (only used if ENABLE_BASIC_AUTH_FALLBACK=true)
BASIC_AUTH_USER=ocr-admin
BASIC_AUTH_PASS=your-secure-password-here

# ========================================
# Server Configuration
# ========================================

# Server port
PORT=3000

# Node environment
NODE_ENV=development

# Allowed origins for CORS (comma-separated)
ALLOWED_ORIGINS=https://chat.openai.com,https://chatgpt.com

# MCP HMAC secret (optional, for additional request signing)
MCP_HMAC_SECRET=

# ========================================
# Supabase Configuration (if using Supabase Auth)
# ========================================

SUPABASE_URL=https://your-project.supabase.co
SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key

# ========================================
# Example Configurations
# ========================================

# --- Auth0 Example ---
# AUTH_DOMAIN=dev-abc123.us.auth0.com
# AUTH_AUDIENCE=https://api.yourcompany.com/mcp
# AUTH_ISSUER=https://dev-abc123.us.auth0.com/
# JWKS_URI=https://dev-abc123.us.auth0.com/.well-known/jwks.json

# --- Supabase Example ---
# AUTH_DOMAIN=xyzabc.supabase.co
# AUTH_AUDIENCE=authenticated
# AUTH_ISSUER=https://xyzabc.supabase.co/auth/v1
# JWKS_URI=https://xyzabc.supabase.co/auth/v1/.well-known/jwks.json

# --- Okta Example ---
# AUTH_DOMAIN=dev-12345.okta.com
# AUTH_AUDIENCE=api://default
# AUTH_ISSUER=https://dev-12345.okta.com/oauth2/default
# JWKS_URI=https://dev-12345.okta.com/oauth2/default/v1/keys

# --- Keycloak Example ---
# AUTH_DOMAIN=auth.yourcompany.com
# AUTH_AUDIENCE=mcp-api
# AUTH_ISSUER=https://auth.yourcompany.com/realms/master
# JWKS_URI=https://auth.yourcompany.com/realms/master/protocol/openid-connect/certs
